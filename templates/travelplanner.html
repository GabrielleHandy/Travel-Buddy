{%extends 'base.html'%}
{% block head %}
<link rel="stylesheet" href="/static/css/travel_planner.css">


{% endblock %}
{% block content%}
<li>Customize Travel Planner</li>
<li>
    <div class="dropdown">
    <button class="dropbtn"> Switch Travel Planners
    </button>
    <div class="dropdown-content">
        {% for travel_planner in tp.user.travel_planner%}
            <a href="/travel_planner/{{travel_planner.tp_id}}/{{travel_planner.destinations[0].dest_id}}"`>{{travel_planner.name}}</a>
        {%endfor%}
    </div>
</li>

{% endblock %}
{% block body %}
    <div id="destination_name">
        <h1 id="dest_country">Destinations</h1>
        <button>Add a new destination</button>
        <button>Edit a destination</button>
     <ul>
         {% for destination in destinations%}
         <li><a href='/travel_planner/{{tp.tp_id}}/{{destination.dest_id}}'><button value="{{destination.city_name}},{{destination.country_name}}">{{destination.city_name}},{{destination.country_name}}</button></a></li>
        {% endfor %}
     </ul>
    </div>


    <div id= 'weather'>

    <h3>Weather</h3>
    {%if weather_info%}
        {%for date in weather_info%}
            <div class="day-forcast">  {{date[0]}}*{{date[1][0][0]}}***(icon)***{{date[1][0][2]}} {{date[1][0][1]}}</div>
            <p class='expand_info'>
                {%for time in date[1]%}
                    {{time[0]}}: {{time[1]}}  {{time[2]}} 
                {%endfor%}
            </p>
        
        {%endfor%}
    {%else%}
        {{weather_info}}
        <p>Sorry {{base_dest.city_name}} may be spelled improperly or may be too obscure</p> 
    {%endif%}   
    </div>
      
    <div id= 'money_exchange'>Money Currency</div>
    <div>maybe a little notebook with budget calculator
        and stuff
    </div>
    <div id ="flight">Flight and hotel recs</div>
    <div  id='hotels'>
        <form id='hotel_choice'>
            <label for="checkin" >Check-in date:<input type="date"id="checkin"></label>
            <br>
            <label for="checkout" >Check-out date:<input type="date" id="checkout"></label>
            <br>
            <label for="sort-order" >Sort by:</label>
            <select name="sort-order" id ='sort-order'>
                <option value="STAR_RATING_HIGHEST_FIRST">Star rating(high to low)</option>
                <option value="STAR_RATING_LOWEST_FIRST">Star rating(low to high)</option>
                <option value="GUEST_RATING">Guest rating</option>
                <option value="PRICE_HIGHEST_FIRST">Price (high to low)</option>
                <option value="PRICE">Price(low to high)</option>
            </select>
            <br>
            <label for="destination">Choose destination:<input type="text" id= "destination" value={{base_dest.city_name}} disabled= True></label>
            <br>
            <label for="currency">Currency: <input type="text" id='currency' value={{currency}}></label>
            <br>
            <label for="adult_num">Number of Adults: <input type="number" name="adult_num" id="adult_num"> </label>
            <br>
            <input type="submit" id="hotel_submit" value="Find Accomadations">
            
        </form>
        <div id='hotel_results'>
           
        </div>
    </div>

    <div>emergency info and embassy stuff
        <h1>for example:</h1>
        {% if embassy%}
            <a href="{{embassy.website}}">Embassy</a>
            <br>
            address: {{embassy.address}}
        <p>Here are some in the surronding areas in {{base_dest.country_name}}!</p>

            {% if not embassies %}
        <h3>Sorry! We couldnt find any other embassies for this location!</h3>
        <p>We are always updating, so be sure to check back in!</p>
            {%else%}
            <ul>
                {% for embassy in embassies %}
                <li>
                    
                    <p> 
                        {%if embassy.website %}
                        <a href="{{embassy.website}}">Embassy</a>
                        <br>
                        address: {{embassy.address}}
                        {%else%}
                        Embassy
                        <br>
                        address: {{embassy.address}}
                        {%endif%}
                    </p>
                </li>
                {%endfor%}
            </ul>
            {% endif %}
        {%else%}
        {% if not embassies %}
        <h1>Sorry! We couldnt find any embassies for this location!</h1>
        <p>We are always updating, so be sure to check back in!</p>
        {% else %}
        <p>There doesn't seem to be any embassies in {{base_dest.city_name}}!</p>
        <p>However, we were able to find embassies around {{base_dest.country_name}} for you! </p>
        <ul>
            {% for embassy in embassies %}
            <li>
                
                <p> 
                    {%if embassy.website %}
                    <a href="{{embassy.website}}">Embassy</a>
                    <br>
                    address: {{embassy.address}}
                    {%else%}
                    Embassy
                    <br>
                    address: {{embassy.address}}
                    {%endif%}
                </p>
            </li>
            {%endfor%}
        </ul>
        
        {% endif %}
        {% endif %}  
    </div>
    <script src="/static/js/travel_planner.js"></script>
{%endblock body%}